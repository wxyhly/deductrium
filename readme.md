# Deductrium

[English version](/wxyhly/deductrium/blob/main/readme_en.md)

一个在浏览器中用Typescript实现的数学形式系统与双曲空间结合的游戏。目前包含命题逻辑、一阶逻辑、皮亚诺公理、ZFC集合论与一些类型论的内容。

链接：[wxyhly.github.io/deductrium](https://wxyhly.github.io/deductrium/)

## 推理层教程

### 命令输入框
命令输入框位于最下方，当提示请输入命令时，可以输入定理表底部各按钮括号中的内容执行命令，效果与点按钮一样。一个命令可能分多次输入才能完成，若想中途推出，请按`Esc`键取消，以便执行其它命令。
### 推理
推理规则表中的推理规则都是这样的形式：
`( A1, A2, ..An ⊢ C )`
它代表若`A1`、`A2`、……`An`都是定理表中的定理，则执行该规则后就能把`C`加入到定理表中。要执行某个推理规则，首先确保没有正在执行的命令（若有按Esc取消），然后可以：
- 输入推理规则名称
- 或直接鼠标点击推理规则

执行规则时，命令提示栏会让你指定条件`A1`、`A2`、……`An`分别对应定理表中的哪条定理，此时可以直接在定理表中点选。表达式里以`$`开头的单词叫做替换变量，在推理执行前需要指定替换变量的值。系统将先自动通过条件定理匹配替换变量的值，若无法确定则需玩家按照提示输入替换内容，替换内容必须是合法表达式。合法表达式可以是合法公式或合法项。
### 合法公式
合法公式相当于能够判定真假的命题。最简单的合法公式（即原子公式）是普通的字母，普通变量要求仅能包含小写字母、数字与`$`，注意大写字母可能被系统保留，不推荐使用。
合法公式可以通过命题逻辑连接符号组合成更复杂的合法公式，如`a > b`、`((1 @ 3) & ~a)`，括号用于区分运算符的优先级，详见下面的符号列表。
### 合法项
合法项则是类似集合、数字、集合元素等概念。普通的字母即可作为合法项（即原子项），但任何字母不能同时作为项和公式出现。合法项可以通过函数符号组合成更复杂的合法项，比如`aU{b,c}`、`1+(2*(x+3))`；合法项还可以通过谓词符号组合成合法公式，比如`1+1=2`、`x@{x,y}`。
### 常见符号列表    
|输入方式|显示字符|使用方式|
|---|---|---|
|`>`|`→`|`$0 > $1`|
|`~`|`¬`|`~$0`|
|`\|`|`∨`|`$0 \| $1`|
|`&`|`∧`|`$0 & $1`|
|`<>`|`↔`|`$0 <> $1`|
|`V`|`∀`|`V$0:$1`|
|`E`|`∃`|`E$0:$1`|
|`@`|`∈`|`$0 @ $1`|
|`=`|`=`|`$0 = $1`|
### 快捷输入
当命令行等待输入合法表达式时，鼠标位于定理、规则表中的规则上时，点击（或手机屏幕触摸）将自动在光标处插入白色高亮部分内容，若命令行中有文字被选中，则所有出现选中文字内容的地方都将替换为白色高亮部分内容。
### 假设与录制宏
由于定理表中的定理都是由推理规则推导出来的，如果涉及很多相同的复杂的推导步骤会很麻烦。在解锁相应规则之后，可以点击录制宏，将整个定理列表中的所有推理步骤打包成宏加入推理规则表中，方便多次使用。推荐定理中使用`$`开头的原子表达式，这样录制成推理规则后，普通变量将升级为替换变量从而替换成任意表达式。

若想要录制带假设的推理规则宏，可在定理列表为空的前提下点击假设按钮按提示输入假设，然后再进行后续推理、录制宏步骤。
### 元规则
与规则推出定理类似，元规则推出推理规则。操作方法与推理规则推定理的操作方法完全一样。所有元规则均由系统提供，可在游戏内逐渐解锁，每个元规则的具体使用方法见游戏内的说明。很多元规则的名称前都有“[]”符号，其中的字母可用于快速生成并使用这些元规则。
### 断言机制
在一阶逻辑中，往往会对替换的变量加上“不自由出现”、“可替换”等限制。由于以`$`开头的原子表达式在录制宏后可能被任意替换，因此它们参与的表达式中，往往“不自由出现”、“可替换”等条件是暂时无法确定的。系统使用`#nf`以及`#crp`等断言函数来标记它们，并具有一定的模糊逻辑处理能力。当`$`开头的原子表达式后续被替换为具体值时，系统将检查这些值是否符合该断言。

## 类型层教程
类型层中会将已知的解锁的类型与其它表达式列入“公理类型”列表中。与推理层不同，它们仅供你参考，并不是可执行的规则。要推导定理，请在定理列表中直接输入表达式，系统将自动识别并检查你给的证据是否合法。注意，类型层中不允许任何未定义的自由变量出现，请使用小写字母用于约束变量，类型层中不再有通用匹配符（$）机制。类型层中有特殊的“定义相等”的机制，即若两表达式是定义相等的，系统将在任何地方都不区分它们。另一个类似概念则是命题相等，命题相等(eq)与一阶逻辑中的相等谓词类似，仅仅是一个命题。
### 常见符号列表    
|输入方式|显示字符|使用方式|
|---|---|---|
|`->`|`→`|`x -> y`|
|`L`|`λ`|`Lx:a,b`|
|`P`|`Π`|`Px:a,b`|
|`S`|`Σ`|`Sx:a,b`|
|`X`|`×`|`aXb`|
## 证明助手
当命题复杂时，手动输入构造证明的证据（即相应类型的值）是相当困难的，证明助手可自动完成一些工作。首先在定理列表中输入待证命题，然后点击证明策略中的加号按钮，再点击定理列表中的待证命题，证明助手会引导你完成目标类型的值的构建。